================================================================================
FISHING POINT (磯リンク) - 開発記録 & ロードマップ
================================================================================

[Project Info]
Name: Fishing Point (磯リンク)
Current Version: v3.0.0 (Public Release)
Status: Released (Firebase Hosting)
Last Updated: 2026-01-11

================================================================================
[History]

v3.0.0 (2026-01-11) - 本番公開 & 管理機能完成 & パフォーマンス最適化
--------------------------------------------------------------------------------
- [Feature] Firebase Hostingへのデプロイ完了（本番公開）
- [Feature] 管理画面 (Admin Dashboard) の大幅強化
    - 登録済みポイントの一覧表示機能
    - 既存ポイントの編集・更新機能（画像の部分更新対応）
    - ポイントの削除機能
    - 処理中のプログレス表示（ローディングオーバーレイ）実装
- [Feature] 360度ビューワー (VR) の実装
    - A-Frameを使用したブラウザでのパノラマ再生 (vr-view.html)
    - CORS設定の適用（Google Cloud StorageのHEAD/GET許可）
- [Optimization] 口コミ機能の読み込みコスト削減
    - データ非正規化 (Denormalization) 対応
    - レビューデータ内にポイント名・画像を保持させ、N+1問題を解消
    - 読み込み件数制限 (limit 20) とインデックスの適用
- [Optimization] 画像アップロード処理の高速化
    - 360度画像のクライアント側圧縮をスキップし、処理時間を短縮
    - UIブロックを防ぐ非同期処理の適正化
- [Fix] セキュリティルールの更新（Firestore Rules）
- [Fix] APIキーのリファラー制限設定（Hosting URLの許可）
- [UI] プレースホルダー画像サービスの廃止（ローカルフォールバックへの変更）

v2.1.0 (2026-01-xx) - 認証基盤の安定化
--------------------------------------------------------------------------------
- [Fix] APIキーの分離運用
    - Auth/DB用 (firebase-config.js) と Maps API用 (HTML) を分離
    - Maps APIキーの不必要なAuth制限を解除し、地図表示エラーを解消
- [Refactor] ログインページ等のAPIキー参照ロジックを修正

v2.0.0 (2025-xx-xx) - UIリニューアル & 機能統合
--------------------------------------------------------------------------------
- サイト全体のデザイン刷新 (Tailwind CSS導入)
- コンポーネント化 (Header, Footer, BottomNav)
- 360度画像の管理ロジック追加

(以下、v1.x系のログは省略)

================================================================================
[Current Architecture]

Frontend:
- Vanilla JS (ES Modules)
- Tailwind CSS (CDN/Build)
- A-Frame (VR View)
- Google Maps JS API (Async Loading)

Backend (Firebase):
- Authentication (Email/Pass)
- Firestore (Database)
    - Collections: users, fishing-points
    - Sub-collections: reviews (Note: Collection Group Queries enabled)
- Storage (Images)
    - Buckets: point_photos, vr_images, captain_images
- Hosting (Web Server)

================================================================================
[Current Issues & TODO]

[Low]
- バリデーション強化: ユーザー入力値（特に文字数や形式）の厳格なチェック
- 画像最適化: Cloud Functionsによるアップロード画像のサーバーサイドリサイズ（現状はクライアント側で対応済みだが、画質安定化のため）
- オフライン対応: PWA化の検討（釣り場での電波対策）

[Resolved / Completed]
- [Done] 口コミ一覧のReadコスト削減（非正規化対応済み）
- [Done] 360度画像のアップロード待ち時間短縮（圧縮スキップ対応済み）
- [Done] 管理画面での編集・削除機能（実装済み）
- [Done] Google Maps APIの警告対応（Marker廃止警告は現状維持、loading=async対応済み）
- [Done] 本番環境でのCORSエラー（gsutil設定済み）

================================================================================
[Admin Credentials]
- 管理者権限の付与は `admin.html` の「管理者追加フォーム」から実行可能。
- 既存ユーザーの場合は `role: 'admin'` フィールドが付与される。